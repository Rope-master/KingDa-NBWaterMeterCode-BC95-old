/*******************************************************************************
Copyright: 
File name: rs485.c
Description: rs485相关函数、变量
Author: 初学者cy
Version: 
Date: 
History:       
*******************************************************************************/
/*******************************************************************************
文件包含区
*******************************************************************************/
#include "rs485.h"
/*******************************************************************************
常量定义区
*******************************************************************************/
/*******************************************************************************
公共变量定义区
*******************************************************************************/
/*******************************************************************************
外部变量声明区
*******************************************************************************/
/*******************************************************************************
私有变量定义区
*******************************************************************************/ 
/*******************************************************************************
测试变量定义区
*******************************************************************************/
/*******************************************************************************
内部函数定义区
*******************************************************************************/
/*******************************************************************************
功能代码定义区
*******************************************************************************/
/*******************************************************************************
 Function:      //
 Description:   //
 Input:         //
 Output:        //
 Return:	//
 Others:        //
*******************************************************************************/
void RS485_Init(u32 BaudRate)
{
  RS485_PWR_Init;
  RS485_PWR_Set;
  USART1_Config(BaudRate);  
  USART1_Free();
  
  if(DevicePara.Mode.ManualDebug == WAKE)
  {
    SoftTimer_CreateTimer(CONTINUOUS, 1000, RS485_LedRun); 
  }
}
/*******************************************************************************
 Function:      //
 Description:   //
 Input:         //
 Output:        //
 Return:	//
 Others:        //
*******************************************************************************/
void RS485_DeInit(void)
{
  RS485_PWR_Rst;
  USART_DeInit(USART1); 
  GPIO_Init(GPIOC,GPIO_Pin_2|GPIO_Pin_3,GPIO_Mode_Out_PP_Low_Slow);//设定IO为低
  
  SoftTimer_DeleteTimer(RS485_LedRun); 
  RS485_LED_OFF();
}
/*******************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:	//
 Others:        //
*******************************************************************************/
void RS485_TX(uint8_t *pbuff,uint16_t length)
{
  USART1_TX(pbuff,length);
}
/*******************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:	//
 Others:        //
*******************************************************************************/
void RS485_LedRun(void)
{
  GPIO_ToggleBits(GPIOD, GPIO_Pin_7);
}
/*************************************END**************************************/

